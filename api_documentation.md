
# API Документация для платформы обмена товарами

Эта документация описывает RESTful API для платформы обмена товарами, созданной на Django с использованием Django REST Framework (DRF).

---

## 1. Ресурс: Объявления (Ads)

### 1.1 Получить все объявления

- **URL**: `/api/ads/`
- **Метод**: `GET`
- **Описание**: Получить список всех объявлений.
  
#### Параметры запроса:
- `search`: строка для поиска по полям `title` и `description`.
- `ordering`: сортировка по полям `category`, `condition`, `created_at`.
- `category`: фильтрация по категории товара.
- `condition`: фильтрация по состоянию товара. Доступные значения:
  - `new`: новый товар.
  - `used`: б/у товар.

#### Ответ:

**200 OK**  
```json
[
    {
        "id": 1,
        "title": "Название товара 1",
        "description": "Описание товара 1",
        "image_url": "url_картинки_1",
        "category": "Электроника",
        "condition": "new",
        "created_at": "2025-04-01T12:00:00Z"
    },
    ...
]
```

---

### 1.2 Создать объявление

- **URL**: `/api/ads/create/`
- **Метод**: `POST`
- **Описание**: Создать новое объявление.

#### Тело запроса:

```json
{
    "title": "Название товара",
    "description": "Описание товара",
    "category": "Категория товара",
    "condition": "new",  // "new" или "used"
    "image_url": "URL изображения (опционально)"
}
```

#### Ответ:

**201 Created**  
```json
{
    "id": 1,
    "title": "Название товара",
    "description": "Описание товара",
    "category": "Электроника",
    "condition": "new",
    "created_at": "2025-04-01T12:00:00Z"
}
```

---

### 1.3 Получить, обновить или удалить объявление по ID

- **URL**: `/api/ads/{id}/`
- **Метод**: `GET`, `PUT`, `DELETE`
- **Описание**: Получить данные объявления, обновить или удалить его по ID.

#### GET: Получить данные объявления

**200 OK**  
```json
{
    "id": 1,
    "title": "Название товара",
    "description": "Описание товара",
    "image_url": "url_картинки_1",
    "category": "Электроника",
    "condition": "new",
    "created_at": "2025-04-01T12:00:00Z"
}
```

#### PUT: Обновить объявление

**200 OK**  
```json
{
    "message": "Ad updated successfully",
    "updated_ad": {
        "id": 1,
        "title": "Обновленное название товара",
        "description": "Обновленное описание товара",
        "category": "Электроника",
        "condition": "used",
        "created_at": "2025-04-01T12:00:00Z"
    }
}
```

#### DELETE: Удалить объявление

**204 No Content**  
```json
{
    "message": "Success deleted"
}
```

---

## 2. Ресурс: Предложения обмена (ExchangeProposal)

### 2.1 Создать предложение обмена

- **URL**: `/api/exchange/create/`
- **Метод**: `POST`
- **Описание**: Создать новое предложение обмена.

#### Тело запроса:
```json
{
    "ad_sender": 1,  // ID отправляющего объявления
    "ad_receiver": 2,  // ID получающего объявления
    "comment": "Комментарий к предложению обмена"
}
```

#### Ответ:

**201 Created**  
```json
{
    "id": 1,
    "ad_sender": 1,
    "ad_receiver": 2,
    "comment": "Комментарий к предложению обмена",
    "status": "ожидает",
    "created_at": "2025-04-01T12:00:00Z"
}
```

---

### 2.2 Получить предложения обмена для меня (получателя)

- **URL**: `/api/exchange/to-me/`
- **Метод**: `GET`
- **Описание**: Получить список предложений обмена, направленных на вас (в качестве получателя).

#### Ответ:

**200 OK**  
```json
[
    {
        "id": 1,
        "ad_sender": 1,
        "ad_receiver": 2,
        "comment": "Комментарий",
        "status": "ожидает",
        "created_at": "2025-04-01T12:00:00Z"
    },
    ...
]
```

---

### 2.3 Получить предложения обмена, отправленные мной

- **URL**: `/api/exchange/from/`
- **Метод**: `GET`
- **Описание**: Получить список предложений обмена, отправленных вами.

#### Ответ:

**200 OK**  
```json
[
    {
        "id": 1,
        "ad_sender": 1,
        "ad_receiver": 2,
        "comment": "Комментарий",
        "status": "ожидает",
        "created_at": "2025-04-01T12:00:00Z"
    },
    ...
]
```

---

### 2.4 Подтвердить предложение обмена

- **URL**: `/api/exchange/confirm/{id}/`
- **Метод**: `GET`
- **Описание**: Подтвердить предложение обмена по его ID.

#### Ответ:

**200 OK**  
```json
{
    "status": "confirmed"
}
```

---

## 3. Аутентификация и регистрация

### 3.1 Логин

- **URL**: `/api/login/`
- **Метод**: `POST`
- **Описание**: Аутентификация пользователя.

#### Тело запроса:
```json
{
    "username": "имя_пользователя",
    "password": "пароль"
}
```

#### Ответ:

**200 OK**  
```json
{
    "message": "Success"
}
```

**401 Unauthorized**  
```json
{
    "error": "Неверный логин или пароль"
}
```

---

### 3.2 Регистрация

- **URL**: `/api/register/`
- **Метод**: `POST`
- **Описание**: Регистрация нового пользователя.

#### Тело запроса:
```json
{
    "username": "имя_пользователя",
    "password": "пароль",
    "password2": "пароль"
}
```

#### Ответ:

**201 Created**  
```json
{
    "message": "User registered and logged in successfully"
}
```

**400 Bad Request**  
```json
{
    "error": "Ошибка валидации данных"
}
```

---

## 4. Ошибки

Все ошибки API будут возвращать статус HTTP и сообщение в формате JSON.

Примеры ошибок:
- **400 Bad Request**: Ошибка валидации данных.
- **401 Unauthorized**: Неверные учетные данные.
- **404 Not Found**: Ресурс не найден.
- **500 Internal Server Error**: Внутренняя ошибка сервера.

---
# Инструкция по установке и запуску проекта

---

## 1. Требования

Перед установкой убедитесь, что у вас установлены следующие компоненты:

- **Python** версии 3.8 или выше.
- **Pip** — для установки зависимостей.
- **Git** — для клонирования репозитория (опционально).

---

## 2. Клонирование репозитория

Если у вас еще нет локальной копии репозитория:

```bash

Установка докер обараза
docker push andreylapko1/swapsphere:latest

Или клонирование репозитория

git clone https://github.com/andreylapko1/SwapSphere/
cd SwapSphere


pip install -r requirements.txt


```
# Admin panel

## login: admin
## password: admin